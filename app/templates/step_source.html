{% extends "base_step.html" %}

{% block content %}
<div class="w-full h-full flex flex-col items-center justify-center px-6 py-12">

    <!-- Single card that wraps the whole step -->
    <div class="w-full max-w-3xl bg-[#111] border border-white/10 rounded-3xl px-6 py-8 md:px-10 md:py-10 flex flex-col gap-8">

        <form action="/app/source" method="POST" enctype="multipart/form-data" class="w-full">
            <!-- YouTube Input Section -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-400 mb-3">Drop a YouTube link</label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none">
                        <i class="fa-brands fa-youtube text-red-500"></i>
                    </div>
                    <input type="text" name="youtube_url" id="youtube-input"
                        class="w-full bg-white border border-white/10 rounded-xl py-3 pl-12 pr-4 text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white/20 transition"
                        placeholder="https://youtube.com/watch?v=...">
                </div>
            </div>

            <!-- OR Divider -->
            <div class="flex items-center gap-4 my-6">
                <div class="flex-1 h-px bg-white/10"></div>
                <span class="text-xs text-gray-500 uppercase tracking-wider">or</span>
                <div class="flex-1 h-px bg-white/10"></div>
            </div>

            <!-- File Upload Section -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-400 mb-3">Upload a video file</label>
                <div class="relative">
                    <input type="file" name="video_file" id="file-input" accept="video/*" class="hidden">
                    <button type="button" id="upload-btn"
                        class="w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-3 px-4 text-gray-400 hover:text-white hover:border-white/30 transition flex items-center justify-center gap-2">
                        <i class="fa-solid fa-upload"></i>
                        <span>Choose file</span>
                    </button>
                    <div id="file-name" class="hidden mt-2 text-sm text-gray-400 truncate"></div>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" id="submit-btn"
                class="w-full bg-white text-black font-bold py-3 rounded-xl hover:bg-gray-200 transition mb-4">
                Get clips in 1 click
            </button>

            <!-- Google Drive Option -->
            <button type="button"
                class="w-full bg-[#1a1a1a] border border-white/10 text-white py-3 rounded-xl hover:bg-white/10 transition flex items-center justify-center gap-2">
                <i class="fa-brands fa-google-drive"></i>
                <span>Import from Google Drive</span>
            </button>
        </form>

        <!-- Feature Icons Row -->
        <div class="w-full grid grid-cols-4 md:grid-cols-7 gap-4">
            <div class="flex flex-col items-center gap-2 text-center">
                <div class="w-12 h-12 bg-[#111] border border-white/10 rounded-xl flex items-center justify-center">
                    <i class="fa-solid fa-scissors text-purple-500"></i>
                </div>
                <span class="text-[10px] text-gray-500">Long to shorts</span>
            </div>
            <div class="flex flex-col items-center gap-2 text-center">
                <div class="w-12 h-12 bg-[#111] border border-white/10 rounded-xl flex items-center justify-center">
                    <i class="fa-solid fa-closed-captioning text-blue-500"></i>
                </div>
                <span class="text-[10px] text-gray-500">AI Captions</span>
            </div>
            <div class="flex flex-col items-center gap-2 text-center">
                <div class="w-12 h-12 bg-[#111] border border-white/10 rounded-xl flex items-center justify-center">
                    <i class="fa-solid fa-wand-magic-sparkles text-pink-500"></i>
                </div>
                <span class="text-[10px] text-gray-500">Auto-edit</span>
            </div>
            <div class="flex flex-col items-center gap-2 text-center">
                <div class="w-12 h-12 bg-[#111] border border-white/10 rounded-xl flex items-center justify-center">
                    <i class="fa-solid fa-crop text-green-500"></i>
                </div>
                <span class="text-[10px] text-gray-500">Auto-crop</span>
            </div>
            <div class="flex flex-col items-center gap-2 text-center">
                <div class="w-12 h-12 bg-[#111] border border-white/10 rounded-xl flex items-center justify-center">
                    <i class="fa-solid fa-eye text-yellow-500"></i>
                </div>
                <span class="text-[10px] text-gray-500">Face track</span>
            </div>
            <div class="flex flex-col items-center gap-2 text-center">
                <div class="w-12 h-12 bg-[#111] border border-white/10 rounded-xl flex items-center justify-center">
                    <i class="fa-solid fa-language text-red-500"></i>
                </div>
                <span class="text-[10px] text-gray-500">Translate</span>
            </div>
            <div class="flex flex-col items-center gap-2 text-center">
                <div class="w-12 h-12 bg-[#111] border border-white/10 rounded-xl flex items-center justify-center">
                    <i class="fa-solid fa-share-nodes text-orange-500"></i>
                </div>
                <span class="text-[10px] text-gray-500">Auto-post</span>
            </div>
        </div>

    </div>

</div>

<script>
    const youtubeInput = document.getElementById('youtube-input');
    const fileInput = document.getElementById('file-input');
    const uploadBtn = document.getElementById('upload-btn');
    const fileNameDisplay = document.getElementById('file-name');

    uploadBtn.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            fileNameDisplay.textContent = fileInput.files[0].name;
            fileNameDisplay.classList.remove('hidden');
            youtubeInput.value = ''; // Clear URL if file selected
            youtubeInput.disabled = true;
            youtubeInput.placeholder = "File selected";
        }
    });

    // Clear file if user types in YouTube input
    youtubeInput.addEventListener('input', () => {
        if (youtubeInput.value.trim()) {
            fileInput.value = '';
            fileNameDisplay.classList.add('hidden');
            fileInput.disabled = true;
        } else {
            fileInput.disabled = false;
        }
    });
</script>
{% endblock %}